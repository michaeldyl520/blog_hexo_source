---
title: chcon命令详解(SELinux命令详解)chcon命令详解(SELinux命令详解)
tags:
  - chcon
  - SELINUX
url: 50.html
id: 50
categories:
  - CentOS
date: 2014-03-10 17:05:25
---

chcon命令：修改对象（文件）的安全上下文。比如：用户：角色：类型：安全级别。 命令格式： Chcon \[OPTIONS…\] CONTEXT FILES….. Chcon \[OPTIONS…\] –reference=PEF\_FILES FILES… 说明： CONTEXT 为要设置的安全上下文 FILES 对象（文件） --reference 参照的对象 PEF\_FILES 参照文件上下文 FILES 应用参照文件上下文为我的上下文。 OPTIONS 如下： -f 强迫执行 -R 递归地修改对象的安全上下文 -r ROLE 修改安全上下文角色的配置 -t TYPE 修改安全上下文类型的配置 -u USER 修改安全上下文用户的配置 -v 显示冗长的信息 -l, --range=RANGE 修改安全上下文中的安全级别 范例： 1、ftp //If you want to share files anonymously <如果你想把这个共享给匿名的话，需要开启以下> chcon -R -t public\_content\_t /var/ftp //If you want to setup a directory where you can upload files ＜如果你想让你设置的FTP目录可以上传文件的话，SELINUX需要设置＞ chcon -t public\_content\_rw\_t /var/ftp/incoming //You must also turn on the boolean allow\_ftpd\_anon\_write <允许匿名用户写入权限＞ setsebool -P allow\_ftpd\_anon\_write=1 //If you are setting up this machine as a ftpd server and wish to allow users to access their home directorories<如果你希望你的FTP用户可以访问自己的家目录的话，需要开启> setsebool -P ftp\_home\_dir 1 //If you want to run ftpd as a daemon<如果你希望将vsftpd以daemon的方式运行的话，需要开启> setsebool -P ftpd\_is\_daemon 1 //You can disable SELinux protection for the ftpd daemon<你可以让SElinux停止保护vsftpd的daemon方式动行> setsebool -P ftpd\_disable\_trans 1 2、httpd //If you want a particular domain to write to the public\_content\_rw\_t domain <如果希望具体个doman具有可写权限的话，需要设置> setsebool -P allow\_httpd\_anon\_write=1 or setsebool -P allow\_httpd\_sys\_\_anon_write=1 //httpd can be setup to allow cgi s to be executed setsebool -P httpd\_enable\_cgi 1 //If you want to allow access to users home directories<允许用户HHTP访问其家目录，该设定限仅于用户的家目录主页> setsebool -P httpd\_enable\_homedirs 1 chcon -R -t httpd\_sys\_content\_t ~user/public\_html //httpd is allowed access to the controling terminal<允许httpd访问终端＞ setsebool -P httpd\_tty\_comm 1 //such that one httpd service can not interfere with another setsebool -P httpd\_unified 0 //loadable modules run under the same context as httpd setsebool -P httpd\_builtin\_ing 0 //httpd s are allowed to connect out to the network setsebool -P httpd\_can\_network\_connect 1 // You can disable suexec transition setsebool -P httpd\_suexec\_disable\_trans 1 //You can disable SELinux protection for the httpd daemon by executing <关闭Selinux的关于httpd进程守护的保护> setsebool -P httpd\_disable\_trans 1 service httpd restart 3、named //If you want to have named update the master zone files <关于named,master更新selinux设定> setsebool -P named\_write\_master\_zones 1 //You can disable SELinux protection for the named daemon by executing <关闭named的进程守护保护> setsebool -P named\_disable\_trans 1 service named restart 4、nfs //If you want to setup this machine to share nfs partitions read only setsebool -P nfs\_export\_all_ro 1 //If you want to share files read/write setsebool -P nfs\_export\_all\_rw 1 //If you want to use a remote NFS server for the home directories on this machine ＜如果你想要将远程NFS的家目录共享到本机，需要开启> setsebool -P use\_nfs\_home\_dirs 1 5、samba //If you want to share files other than home directorie <如果你希望将目录共享给其他用户，你需要设置> chcon -t samba\_share\_t /directory //If you want to share files with multiple domains 如果samba服务器共享目录给多个域，则需要： setsebool -P allow\_smbd\_anon\_write=1 //If you are setting up this machine as a Samba server and wish to share the home directories samba服务器要共享家目录时： setsebool -P samba\_enable\_home\_dirs 1 //If you want to use a remote Samba server for the home directories on this machine 如果你需在本机上使用远程samba服务器的家目录 setsebool -P use\_samba\_home\_dirs 1 //You can disable SELinux protection for the samba daemon by executing 关闭selinux关于samba的进程守护的保护 setsebool -P smbd\_disable\_trans 1 service smb restart 6、rsync //If you want to share files using the rsync daemon 共享rsync目录时： chcon -t public\_content\_t /directories //If you want to share files with multiple domains 允许其他用户写入时 setsebool -P allow\_rsync\_anon\_write=1 //You can disable SELinux protection for the rsync daemon by executing 停止rsync的进程保护 setsebool -P rsync\_disable\_trans 1 7、kerberos //allow your system to work properly in a Kerberos environment 允许系统使用kerberos setsebool -P allow\_kerberos 1 //If you are running Kerberos daemons kadmind or krb5kdc setsebool -P krb5kdc\_disable\_trans 1 service krb5kdc restart setsebool -P kadmind\_disable\_trans 1 service kadmind restart 8、nis Allow your system to work properly in a NIS environment 系统工作在nis环境时 setsebool -P allow\_ypbind 1